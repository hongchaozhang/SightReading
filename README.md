# Sight Reading（视奏）
帮助养成钢琴视奏习惯，主要是提前预读的习惯。应用实现参考[帮助练习钢琴视奏的应用SightReading](http://hongchaozhang.github.io/blog/2021/02/26/an-app-to-help-piano-sight-reading/)。

## 乐谱添加
1. 从图片库添加乐谱图片。
2. 手动标注每小节区域。小节序号从1开始，每标注一个小节，小节序号自动加1。如果需要修改标注过的小节区域，手动设置小节序号之后，重新绘制该小节区域。
3. 填写乐谱名称。乐谱名称是乐谱的唯一标识，不能重复。如果设置重复，保存的时候会提示用户。
## 乐谱视奏
1. 显示或者隐藏笔记。
2. 设置节拍器速度。
3. 设置每小节拍数。
4. 设置Mask偏移的拍数，小于上面设置的每小节拍数。“0”表示这一小节刚开始弹就显示Mask，演奏者必须在该小节开始演奏的时候预读完该小节所有音符并且记住。如果感觉有困难，可以设置成“1”， 表示该小节演奏一小节之后Mask才显示，这样你需要预读和记忆的音符就会减少。如果将该值设置成最大值（每小节拍数-1），就起不到强制预读的作用了，和直接看谱弹没有差别。
5. 双击全屏曲谱。
6. 左右滑动可以显示上一页或者下一页。这里是根据乐谱命名规则进行翻页的。比如现在在“天空之城2”这一页，上一页就是“天空之城1”， 下一样就是“天空之城3”。只支持10页之内的乐谱，大于等于10页的乐谱翻页会有问题。
7. 点击“start”按钮节拍器开始，前面会有两个小节供演奏者准备，演奏者从第三小节开始演奏。比如，假设Mask偏移设置为0，Mask会从第三小节开始盖住第一小节，此时演奏者应该已经预读并记住了第一小节，在演奏第一小节的同时，预读并记忆第二小节的内容。

## 乐谱笔记
用户可以在“乐谱视奏”页面点击右上方的“Edit”按钮进入笔记页面。进入笔记页面的同时，应用会将乐谱和之前做过的笔记加载进来，用户在此基础上做笔记。
用户可以：
1. 选择绘制颜色（支持透明色）。
2. 选择绘制线粗细。
3. 对于新绘制的内容，用户可以通过”Redo“和”Undo“按钮进行修改，也可以通过”删除“按钮删除所有新添加的笔记。
4. ”橡皮擦“功能还没有实现。
5. 点击”Save“保存新添加的笔记，选择”返回“按钮将丢失新添加的笔记。

## 乐谱管理
### 乐谱列表展示
#### 乐谱列表
乐谱会经过字母排序显示在主页面。有笔记的乐谱会在名字后面显示一个特殊的标记。

#### 乐谱标签
每个乐谱项目右边会显示用户给该乐谱添加的标签。
### 乐谱编辑
在乐谱项目上左滑会出现两个按钮：“编辑标签”和“删除”。
1. 编辑标签：进入标签编辑页面编辑该乐谱的标签选择或者添加新标签。
2. 删除：删除该乐谱，包括相应的笔记。

### 乐谱标签编辑
在标签编辑页面，用户可以为该乐谱选择已有的标签，或者添加新的标签，点击“Done”按钮完成标签编辑。

### 乐谱搜索
可以通过下面两种方式进行乐谱搜索：
1. 在输入框输入关键字搜索。
2. 通过选择标签过滤出相应的乐谱。
3. 同时结合关键字和标签进行搜索。
